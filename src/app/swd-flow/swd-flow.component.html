<sqd-designer
  theme="light"
  [undoStackSize]="10"
  [definition]="definition"
  [toolboxConfiguration]="toolboxConfiguration"
  [stepsConfiguration]="stepsConfiguration"
  [validatorConfiguration]="validatorConfiguration"
  [controlBar]="true"
  [selectedStepId]="selectedStepId"
  [isReadonly]="isReadonly"
  [isToolboxCollapsed]="isToolboxCollapsed"
  [isEditorCollapsed]="false"
  [areEditorsHidden]="false"
  [rootEditor]="rootEditor"
  [stepEditor]="stepEditor"
  (onReady)="onDesignerReady($event)"
  (onDefinitionChanged)="onDefinitionChanged($event)"
  (onSelectedStepIdChanged)="onSelectedStepIdChanged($event)"
  (onIsToolboxCollapsedChanged)="onIsToolboxCollapsedChanged($event)"
  (onIsEditorCollapsedChanged)="onIsEditorCollapsedChanged($event)"
>
</sqd-designer>

<ng-template #rootEditor let-editor>
  <h2>Root Editor</h2>
  <h3>Variables</h3>
</ng-template>

<ng-template #stepEditor let-editor>
  <h4 fd-form-header>{{editor.step.name}}</h4>
  <br/>

  <ng-container *ngIf="editor.step.type === 'controlFlow'">
    <div fd-form-item>
      <label fd-form-label for="input-1">Condition</label>
      <input fd-form-control type="text" id="input-1"
             [value]="editor.step.properties.condition"
             [readonly]="editor.isReadonly"
             (input)="updateProperty(editor.step, 'condition', $event.target, editor.context)" />
    </div>
  </ng-container>

  <ng-container *ngIf="editor.step.type === 'screen'">
    <div fd-form-item>
      <label fd-form-label>Screen</label>
      <fd-select placeholder="Select value"
                 [value]="editor.step.properties.screenId"
                 (valueChange)="updateProperty(editor.step, 'screenId', $event, editor.context)">
        <li fd-option [value]="'registration'">Registration</li>
      </fd-select>
    </div>
  </ng-container>

  <ng-container *ngIf="editor.step.type === 'action'">
    <div fd-form-item>
      <label fd-form-label>Action Name</label>
      <fd-select placeholder="Select value"
                 [value]="editor.step.properties.action"
                 (valueChange)="updateProperty(editor.step, 'action', $event, editor.context)">
        <li fd-option [value]="'createAccount'">Create Account</li>
        <li fd-option [value]="'sendEmail'">Send Email</li>
      </fd-select>
    </div>
  </ng-container>
</ng-template>

<div class="block">
  <button mat-button type="button" (click)="saveFlow()" mat-raised-button color="primary">Save Flow</button>
</div>
